<app-navbaradmin></app-navbaradmin>

<div class="bg-bgPro h-full lg:h-screen">
    <div class=" pt-24 flex justify-center  text-[32px] font-koulen  text-redProject items-center relative mb-8">
        <span class="grow h-[2px] bg-redProject"></span>
        <div class="flex justify-center space-x-32 mx-12">
            <!-- <a (click)="showSection('all-boardgame')" class="cursor-pointer hover:text-red-600">ALL boardgame</a> -->
            <!-- *ngIf="currentSection === 'boardgame'" id="boardgame" -->
            <a class="cursor-pointer hover:text-red-600">boardgame</a>
        </div>
        <span class="grow h-[2px] bg-redProject"></span>
    </div>
    <div *ngIf="showPopup" class="fixed inset-0 bg-black bg-opacity-50 z-30"></div>


    <!-- --------popup-------- -->
    <app-adminbgpopup *ngIf="showPopup" [boardgameID]="selectedBoardgameId"  (close)="closePopup()"></app-adminbgpopup>
    <!-- --------popup-------- -->
    <p-toast></p-toast>

    <div  class="flex flex-col lg:flex lg:flex-row lg:justify-center lg:gap-10 gap-6 ">
        <form  [formGroup]="boardgameForm" (ngSubmit)="AddBoardgame() " class="w-full lg:w-[40%]">
            <div class="">
                <h3 class="text-redProject text-center font-koulen bg-bgPro w-45 ml-6 z-20 relative "
                    style="font-size: 24px; display: inline-block; padding: 0 10px;">Add board game to the list</h3>
                <div class="w-full min-h-[500px] border-2 border-redProject p-6 pb-3 rounded-2xl mt-[-16px] relative z-10">
                    <div class="form-control flex flex-row gap-4">
                        <input type="text" placeholder="Name"
                            class="font-koulen text-[18px] w-[50%] h-14 p-2 mb-5 border-2 border-redProject outline-none bg-bgPro rounded-xl placeholder:text-formfPro focus:ring-red-400 focus:border-red-400 "
                            formControlName='name' required>
                        <!-- <div *ngIf="boardgameForm.get('name')?.invalid && (boardgameForm.get('name')?.dirty || boardgameForm.get('name')?.touched)" 
                                class="alert alert-danger">
                                <div *ngIf="boardgameForm.get('name')?.errors?.['required']">
                                    Name is required
                                </div>
                            </div> -->
                        <input type="number" placeholder="price"
                            class="font-koulen text-[18px] w-[50%] h-14 p-2 mb-5 border-2 border-redProject outline-none bg-bgPro rounded-xl placeholder:text-formfPro focus:ring-red-400 focus:border-red-400 "
                            formControlName='price' min="1" step="any">
                    </div>
                    <textarea type="text" placeholder="Details.."
                        class="font-koulen text-[18px] w-full  pt-1 p-2 mb-5 border-2 border-redProject outline-none bg-bgPro rounded-xl placeholder:text-formfPro focus:ring-red-400 focus:border-red-400 min-h-32 max-h-32"
                        formControlName='description'></textarea>

                    <div class="flex flex-row gap-4">
                        <select
                            class=" font-koulen text-[18px] text-redProject w-[50%] h-14  bg-bgPro p-2 outline-none border-2 border-redProject rounded-xl pr-8 focus:ring-red-400 focus:border-red-400"
                            formControlName="type">
                            <option value="null" disabled selected>Category</option>
                            <option *ngFor="let i of typeItems" [value]="i._id">{{i.name}}</option>

                        </select>
                        <input type="number" placeholder="Quantity"
                            class="font-koulen text-[18px] w-[50%] h-14 p-2 mb-5 border-2 border-redProject outline-none bg-bgPro rounded-xl placeholder:text-formfPro focus:ring-red-400 focus:border-red-400 "
                            formControlName='quantity' min="1" step="any">
                    </div>
                    <div class="flex flex-row gap-4 pb-8">
                        <select
                            class=" form-control font-koulen text-[18px] text-redProject w-[50%] h-14  bg-bgPro p-2 outline-none border-2 border-redProject rounded-xl pr-8 "
                            formControlName="status">
                            <option value="null" disabled selected>Status</option>
                            <option value="true">Available</option>
                            <option value="false">Unavailable</option>
                        </select>
                        <input id="photo" type="file" (change)="onFileSelected($event)" class="form-control text-[16px] text-redProject font-koulen w-72 
                            file:mr-2 file:py-2 file:px-4
                            file:w-44 file:h-full
                            file:text-[18px] file:font-koulen
                            file:rounded-xl file:border-2 file:border-redProject
                            file:bg-transparent file:text-redProject" />

                    </div>
                    <!-- hover:bg-[#B70A1A] -->
                    <div class="flex justify-between ">
                        <button type="button" class="font-koulen text-[18px] w-28 h-10 border-2 border-redProject text-redProject items-center justify-center rounded-xl
                             hover:bg-redProject hover:text-white transition-all duration-500"
                            (click)="ClearBoardgameForm()">CLEAR</button>
                        <button type="submit" class="font-koulen text-[18px] w-28 h-10 bg-redProject text-white items-center justify-center rounded-xl
                            hover:bg-[#B70A1A] transition-all duration-200">ADD ITEM</button>
                    </div>
                </div>
            </div>
        </form>
        <div class="w-full lg:w-[50%] flex flex-col ">
            <div class="overflow-auto h-[32rem] w-full pr-2">
                <div *ngFor="let boardgame of boardgames" >
                    <div class=" h-full border-redProject  border-b-2 pt-3">
                        <div class="flex justify-between h-full">
                            <div class="w-[15%]  flex justify-center ">
                                <img class="w-[96%] h-[90%] rounded-2xl" [src]="boardgame.photoUrl" alt="">
                            </div>
                            <div class="w-80">
                                <div>
                                    <h2 class="text-[20px] font-koulen">{{ boardgame.name }}</h2>
                                    <p class="text-[12px] text-black/80 font-koulen ">category : {{boardgame.type.name}}
                                    </p>
                                    <p class="text-[12px] text-black/80 font-koulen ">price : {{boardgame.price}} BAHT
                                    </p>
                                    <p class="text-[12px] text-black/80 font-koulen">
                                        status :
                                        <span [ngClass]="{'text-green-600': boardgame.status, 'text-redProject': !boardgame.status}">
                                            {{ boardgame.status ? 'Available' : 'Unavailable' }}
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="w-28">
                                <div>
                                    <h2 class="text-[20px] font-koulen">X{{boardgame.quantity}}</h2>
                                </div>

                            </div>
                            <div class="w-16">
                                <button type="button"
                                    class="font-koulen text-[20px]    text-redProject items-center justify-center  hover:text-redProject hover:underline transition-all duration-500"
                                    (click)="openPopup(boardgame._id)">update</button>
                            </div>
                            <div class=" w-16">
                                <button type="button"
                                    class="font-koulen text-[20px]  text-redProject items-center justify-center  hover:text-redProject hover:underline transition-all duration-500"
                                    (click)="deleteBoardgameItem(boardgame._id)">DELETE</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>



</div>
<div class="bg-orange-100/50">
  <app-navbar></app-navbar>
  <div class="container mx-auto">
    <p-toast></p-toast>
    <section class="lg:flex lg:justify-between lg:items-center lg:h-screen lg:px-10">
      <!-- ตัวละครทางซ้าย -->
      <div class="relative items-center hidden lg:inline-flex">
        <div class=" w-[250px] p-5 text-right border-4 border-orange-400 rounded-3xl">
          <p class="text-xl font-koulen text-orange-500">Let’s Goooo!</p>
        </div>
        <img
          src="../../../assets/left_character.png"
          alt="Left character"
          class="absolute w-[250px] left-[-35%]"
        />
      </div>

      <!-- ตัวละครตรงกลางและข้อความ -->
      <div class="relative flex items-center self-center pt-20 lg:pt-0 md:justify-center">
        <div class="relative w-[500px] p-5 text-right border-4 border-orange-400 rounded-3xl shadow-xl">
          <label class="text-[30px] md:text-[40px] font-koulen text-orange-500">
            RESERVE YOUR TIME <br />
            AND LET THE FUN BEGIN!
          </label>
          <button class="hidden px-6 py-2 mt-5 text-xl font-bold text-white bg-orange-500 rounded-full">
            RESERVE
          </button>
        </div>
        <img
          src="../../../assets/fisherman.png"
          alt="Fisherman character"
          class="absolute w-1/3 lg:w-[400px] lg:left-[-30%] md:left-6 drop-shadow-2xl animate-spining"
        />
      </div>

      <!-- ตัวละครทางขวา -->
      <div class="relative items-center hidden lg:inline-flex">
        <div class="w-[300px] p-5 border-4 border-orange-400 rounded-3xl">
          <p class="text-xl font-koulen text-orange-500">Let’s fun together!</p>
        </div>
        <img
          src="../../../assets/right_character.png"
          alt="Right character"
          class="absolute w-[300px] right-[-30%]"
        />
      </div>
    </section>

    <section class="px-4 lg:px-10 py-5" [ngClass]="sectionopcity1">
      <!-- Header Section -->
      <div class="flex flex-wrap items-center justify-center w-full mb-10">
        <div class="flex items-center justify-center text-[20px] sm:text-[24px] lg:text-[50px] font-koulen text-orange-500 basis-full sm:basis-[50%] lg:basis-[20%] mb-4 lg:mb-0">
          <h1>COMING SOON</h1>
        </div>
        <div class="hidden lg:flex flex-1 basis-auto">
          <hr class="w-full mt-2 border-b-2 border-orange-500" />
        </div>
      </div>
    
      <!-- Carousel Section -->
      <div class="flex items-center justify-center lg:justify-between">
        <!-- Cards Container with Horizontal Scrolling -->
        <div class="flex overflow-x-auto space-x-20 custom-scrollbar pb-4">
          <div *ngFor="let card of displayedCards" class="min-w-[250px] sm:min-w-[300px] lg:min-w-[350px] flex-shrink-0 cussnap">
            <div class="flex flex-col md:flex-row space-x-0 sm:space-x-6 p-5 h-full border-4 border-orange-400 rounded-3xl">
              <img
                [src]="card.photoUrl"
                [alt]="card.name"
                class="object-cover sm:w-[200px]  lg:w-[250px] h-[200px] lg:h-[250px] rounded-xl mb-4 sm:mb-0"
              />
              <div class="mt-4 sm:mt-0 sm:ml-4 flex-1">
                <h2 class="text-xl sm:text-2xl font-koulen text-orange-500">{{ card.name }}</h2>
                <p class="mt-2 text-base sm:text-lg max-h-[150px] max-w-[200px] sm:max-h-[100px] md:max-w-[250px] md:max-h-[200px] lg:max-h-[150px] lg:max-w-[250px] overflow-y-auto custom-scrollbar">{{ card.description }}</p>
                <p class="mt-4 text-lg sm:text-xl font-bold text-orange-500 lowercase">COMING SOON</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    
    

    <section class="grid grid-cols-2 md:grid-cols-4 gap-5 p-5 font-koulen lg:mt-20">
      <div class="col-span-2 p-5 text-[24px] md:text-[40px] border-2 border-orange-400 rounded-3xl" [ngClass]="sectionlefttoright">
        <label>
          Get ready for excitement with <br />
          our brand-new game!
        </label>
      </div>
      <div class="col-span-2 row-span-3 p-5 bg-orangePro rounded-3xl" [ngClass]="sectionrigthtoleft">
        <div class="flex">
          <img [src]="boardgameItemsdesc[2].photoUrl" class="w-32 md:w-44" />
          <h2 class="ml-5 text-[32px] md:text-[48px] text-white font-koulen">{{boardgameItemsdesc[2].name}}</h2>
        </div>
        <p class="mt-4 text-lg md:text-[24px] text-white indent-8 select-none overflow-y-auto">{{boardgameItemsdesc[2].description}}</p>
      </div>
      <div class="flex flex-col items-center justify-center row-start-2 col-span-1 row-span-2 bg-orangePro rounded-3xl" [ngClass]="sectionlefttoright">
        <img [src]="boardgameItemsdesc[1].photUrl" class="w-24 md:w-32 mt-2" />
        <div class="flex flex-col items-center justify-center">
          <h3 class="mt-4 text-[24px] md:text-[32px] text-white font-koulen">{{boardgameItemsdesc[1].name}}</h3>
        </div>
      </div>
      <div class="flex flex-col items-center justify-center row-start-2 col-span-1 row-span-2 border-2 border-orangePro rounded-3xl text-orangePro" [ngClass]="sectionlefttoright">
        <img [src]="boardgameItemsdesc[0].photoUrl" class="w-24 md:w-32 mt-2" />
        <h3 class="mt-4 text-[24px] md:text-[32px] font-koulen">{{boardgameItemsdesc[0].name}}</h3>
      </div>
    </section>
    <section class="bg-inherit" [ngClass]="sectionopcity2">
      <section id="beverage" class="pt-24">
        <div class="mb-8 text-3xl md:text-4xl font-normal text-center font-koulen text-orangePro">
          All the games in our store
        </div>
        <div class="flex items-center justify-center">
          <button
            (click)="prevPage()"
            [disabled]="currentPage === 0"
            class="h-10 md:h-12 text-2xl md:text-4xl transition-transform duration-200 transform text-orangePro disabled:opacity-50 hover:scale-150"
          >
            &lt;
          </button>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8 p-5 mx-4 sm:mx-8 md:mx-12">
            <div
              *ngFor="let item of displayedItems"
              class="p-4 flex flex-col border-[3px] border-orangePro rounded-[30px] w-60 sm:w-64 md:w-72"
            >
              <div class="px-4 font-koulen">
                <div class="flex justify-center mb-2">
                  <img class="w-32 sm:w-36 md:w-44 max-h-24 sm:max-h-28 md:max-h-36" [src]="item.photoUrl" alt="">
                </div>
                <div class="w-full text-start text-lg md:text-xl">{{ item.name }}</div>
              </div>
              <div class="flex flex-col justify-center mt-auto font-koulen">
                <div class="flex items-center justify-between pt-1">
                  <span class="grow border-b-2 border-orangePro"></span>
                  <p class="px-3 pt-1 text-lg md:text-xl">{{ item.price }} BAHT</p>
                  <span class="grow border-b-2 border-orangePro"></span>
                </div>
                <div class="flex justify-center">
                  <button
                    (click)="openPopup(item)"
                    class="w-[50%] mt-4 px-2 py-1 sm:px-4 sm:py-1 bg-orangePro text-white rounded-[10px] font-koulen"
                  >
                    ADD TO CART
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button
            (click)="nextPage()"
            [disabled]="(currentPage + 1) * itemsPerPage >= boardgameItems.length"
            class="h-10 md:h-12 text-2xl md:text-4xl transition-transform duration-200 transform text-redProject disabled:opacity-50 hover:scale-150"
          >
            &gt;
          </button>
        </div>
      </section>
      
      <form [formGroup]="cartForm" (ngSubmit)="addToCart()" *ngIf="showPopupSelectItem" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4">
        <div class="bg-white rounded-3xl flex flex-col md:flex-row p-4 md:p-6 space-y-4 md:space-y-0 md:space-x-6">
          <img [src]="selectedItem.photoUrl" class="h-48 md:h-[349px] rounded-3xl w-full md:w-auto object-cover">
          <div class="flex flex-col relative flex-1 ">
            <label class="text-lg md:text-xl font-koulen">{{ selectedItem.name}}</label>
            <label class="text-sm md:text-base ml-0 md:ml-5 mt-2 md:mt-0">{{ selectedItem.description}}</label>
            <div class="flex md:flex-row space-y-4 md:space-y-0 md:space-x-4 items-start md:items-end justify-start mt-auto ">
              <div class="flex  space-x-3 flex-col gap-4">
                <label class="font-koulen text-sm md:text-base mt-2">Price: {{ selectedItem.price}} BAHT</label>
                <div class="flex justify-between items-end gap-4">
                  <div>
                  <button type="button" (click)="decreaseQuantity()" class="px-2 py-1 bg-gray-300 rounded">-</button>
                  <input type="number" formControlName="quantity" min="1" class="w-16 text-center "/>
                  <button type="button" (click)="increaseQuantity()" class="px-2 py-1 bg-gray-300 rounded">+</button>
                </div>
                  <small class="text-slate-600">คงเหลือในคลัง: {{selectedItem.quantity}}</small>
                </div>
                <div class=" flex  flex-row w-full md:space-y-0 gap-4 md:space-x-3">
                  <button (click)="closePopup()" class="border-orangePro border rounded-lg px-3 py-1 text-orangePro font-koulen">Close</button>  
                    <button type="submit" (click)="selectBoardgame(selectedItem._id)" class="border-orangePro border rounded-lg px-3 py-1 text-orangePro font-koulen">Add to cart</button>
                    <button (click)="buyNow(selectedItem._id)" class="bg-orangePro border rounded-lg px-3 py-1 text-white font-koulen">Buy</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
      
    </section>
  </div>
</div>
